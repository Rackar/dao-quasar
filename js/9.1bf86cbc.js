(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"50f2":function(t,e,n){},8649:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"back-btn"},[n("q-btn",{attrs:{outline:"",color:"primary",icon:"keyboard_return"},on:{click:function(e){return t.$router.back()}}})],1),t.isReady?n("Article",{staticClass:"article",attrs:{viewType:"article",post:t.post,groupCreatorId:t.groupCreatorId,addComment:t.showAddComment},on:{edit:t.afterEdit,del:t.afterDelete}}):t._e(),t.isReady?n("Comments",{staticClass:"comments",attrs:{comments:t.comments}}):t._e(),t.isReady?n("AddComment",{attrs:{targetPost:t.post,onSave:t.onAddComment},model:{value:t.shouldShowAddComment,callback:function(e){t.shouldShowAddComment=e},expression:"shouldShowAddComment"}}):n("div",{staticClass:"spinner"},[n("q-spinner",{attrs:{color:"primary",size:"3em"}})],1)],1)},r=[],s=(n("8e6e"),n("8a81"),n("456d"),n("a481"),n("f751"),n("c47a")),c=n.n(s),i=n("f3e3"),a=n.n(i),u=(n("551c"),n("ac6a"),n("cadf"),n("06db"),n("5df3"),n("b95e")),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"header",attrs:{"data-is-empty":0===t.postLikeComments.length}},[t._v(t._s(t.comments.length)+"条评论")]),t._l(t.postLikeComments,(function(t){return n("div",{key:t.comment.id,staticClass:"body"},[n("Article",{attrs:{viewType:"comment",post:t}})],1)}))],2)},m=[];function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={components:{Article:u["a"]},props:{comments:{type:Array,required:!0}},computed:{postLikeComments:function(){return this.comments.map((function(t){return f({},t,{post:t.comment})}))}}},b=l,h=(n("e052"),n("2877")),O=Object(h["a"])(b,p,m,!1,null,"051a8b33",null),g=O.exports,y=n("97af"),v=n("e019");function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C=function(t){var e=t.postId,n=t.isLoggedIn;return n?Promise.all([Object(y["b"])("/protected/post/info",{post_id:e}),Object(y["b"])("/protected/post/likes",{posts:[e]})]).then((function(t){var n=a()(t,2),o=n[0].post,r=n[1].likes;return o.likeStatus=void 0===r[e]?1:r[e],o})):Object(y["b"])("/post/info",{post_id:e}).then((function(t){return w({},t.post,{likeStatus:1})}))},P=function(t){return Object(y["a"])("/grp/".concat(t)).then((function(t){return t.grp}))},k=function(t){return Object(y["a"])("/comments/".concat(t)).then((function(t){return t.comments}))},I={components:{Article:u["a"],Comments:g,AddComment:v["a"]},data:function(){return{post:null,groupInfo:null,comments:[],isReady:!1,shouldShowAddComment:!1}},computed:{isLoggedIn:function(){return""!==this.$store.state.user.userid},postId:function(){return+this.$route.params.id},groupCreatorId:function(){return this.groupInfo.creator}},methods:{showAddComment:function(){this.shouldShowAddComment=!0},onAddComment:function(){var t=this;k(this.postId).then((function(e){t.comments=e,t.post.post.num_comment=e.length}))},afterEdit:function(t){Object.assign(this.post.post,t)},afterDelete:function(){this.$router.replace("/group/".concat(this.groupInfo.id))}},mounted:function(){var t=this,e=this.isLoggedIn,n=this.postId;Promise.all([C({postId:n,isLoggedIn:e}),k(n)]).then((function(e){var n=a()(e,2),o=n[0],r=n[1];return t.post=o,t.comments=r,P(o.post.grp)})).then((function(e){t.groupInfo=e,t.isReady=!0,t.$emit("getGroupInfo",e)})).catch((function(e){t.$q.notify(e.message)}))}},A=I,S=(n("9f75"),n("eebe")),_=n.n(S),D=n("9c40"),E=n("0d59"),$=Object(h["a"])(A,o,r,!1,null,"3f781006",null);e["default"]=$.exports;_()($,"components",{QBtn:D["a"],QSpinner:E["a"]})},"9f75":function(t,e,n){"use strict";var o=n("50f2"),r=n.n(o);r.a},e052:function(t,e,n){"use strict";var o=n("fd90"),r=n.n(o);r.a},fd90:function(t,e,n){}}]);
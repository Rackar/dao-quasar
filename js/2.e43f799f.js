(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"0842":function(t,e,n){"use strict";var a=n("69b4"),s=n.n(a);s.a},"29ba":function(t,e,n){"use strict";var a=n("c016"),s=n.n(a);s.a},"41fc":function(t,e,n){},"488d":function(t,e,n){"use strict";var a=n("41fc"),s=n.n(a);s.a},"69b4":function(t,e,n){},b15d:function(t,e,n){},c016:function(t,e,n){},ca6e:function(t,e,n){"use strict";var a=n("e0bc"),s=n.n(a);s.a},e0bc:function(t,e,n){},ef4b:function(t,e,n){"use strict";var a=n("b15d"),s=n.n(a);s.a},f699:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[null!==t.targetCommentPost?n("AddComment",{attrs:{targetPost:t.targetCommentPost,onSave:t.onAddComment},model:{value:t.addCommentShow,callback:function(e){t.addCommentShow=e},expression:"addCommentShow"}}):t._e(),n("Upload",{ref:"upload",on:{uploaded:t.uploaded,uploading:t.uploading}}),n("div",{staticClass:"hover-color"}),n("div",{staticClass:"row no-wrap items-end title"},[n("q-avatar",{staticClass:"avatar",on:{click:t.changeAvatar}},[n("q-icon",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}],staticClass:"mask",attrs:{name:"icon_paizhao"}}),n("img",{class:{masked:t.editing},attrs:{src:(t.editing?t.edit.avatar:t.userinfo.avatar)||"statics/user.svg"}})],1),n("div",{staticClass:"userinfo"},[n("div",{staticClass:"row relative-position"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}]},[n("q-input",{attrs:{square:"",outlined:"",dense:""},model:{value:t.edit.name,callback:function(e){t.$set(t.edit,"name",e)},expression:"edit.name"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}]},[n("q-btn",{staticClass:"btn",attrs:{outline:"",color:"primary",label:"取消"},on:{click:function(e){t.editing=!1}}}),n("q-btn",{staticClass:"btn",attrs:{unelevated:"",color:"primary",label:"保存",disable:t.loadingVisible},on:{click:t.save}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],staticClass:"username"},[t._v(t._s(this.userinfo.name||this.userinfo.mail_export))]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}]},[n("IconHover",{directives:[{name:"show",rawName:"v-show",value:t.isMyself,expression:"isMyself"}],staticClass:"cursor-pointer",staticStyle:{"padding-top":"8px"},attrs:{iconName:"bianji",width:"16px"},nativeOn:{click:function(e){return t.clickEdit(e)}}})],1),n("q-inner-loading",{attrs:{showing:t.loadingVisible}},[n("q-spinner-gears",{attrs:{size:"50px",color:"primary"}})],1)],1),n("div",{staticClass:"q-size-sm",staticStyle:{"padding-top":"2px"}},[t._v("DAO ID "+t._s(t.id)+" "+t._s(t.userinfo.mail_export))]),t.isMyself?n("div",{directives:[{name:"show",rawName:"v-show",value:!t.editing&&t.userinfo.social_twitter,expression:"!editing &&userinfo.social_twitter"}],staticClass:"q-size-sm"},[t._v("Twitter ID: "+t._s(t.userinfo.social_twitter)+",已绑定群组："+t._s(t.getGroupNameFromId(t.userinfo.social_sync_grp)))]):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}]},[n("q-btn",{attrs:{outline:"","no-caps":"",color:"primary",label:"绑定 Twitter ID"},on:{click:t.clickBandingTwitterBtn}})],1)])],1),n("div",{staticClass:"row q-col-gutter-md"},[n("div",{staticClass:"col-xs-12 col-sm-8 col-md-6 offset-md-1"},[n("q-card",{staticClass:"my-card",attrs:{flat:""}},[n("q-tab-panels",{attrs:{animated:"","transition-prev":"fade","transition-next":"fade"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("q-tab-panel",{staticClass:"posts",attrs:{name:"myPosts"}},[t._l(t.pullList,(function(e){return n("ArticleShow",{key:e.post.id,attrs:{post:e,personPage:!0,addComment:function(){return t.showAddComment(e.post.id)}},on:{del:t.postDeleted}})})),0===t.pullList.length?n("div",[n("div",{staticStyle:{padding:"20px 0 100px"}},[t._v("用户尚未发帖")])]):t._e()],2)],1)],1)],1),n("div",{staticClass:"col-sm-4 col-xs-12"},[t.isMyself?n("PersonWallet",{attrs:{tokens:t.tokens}}):n("PersonGroupList",{attrs:{user_id:t.id}})],1)]),n("q-dialog",{model:{value:t.showBandingTwitter,callback:function(e){t.showBandingTwitter=e},expression:"showBandingTwitter"}},[n("q-card",{staticStyle:{width:"300px"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("绑定推特ID，同步内容到群组")])]),n("q-card-section",[n("q-input",{attrs:{square:"",outlined:"",label:"twitter ID @"},model:{value:t.edit.social_twitter,callback:function(e){t.$set(t.edit,"social_twitter",e)},expression:"edit.social_twitter"}}),n("q-select",{attrs:{outlined:"",options:t.joinedGroupList,label:"同步群组"},model:{value:t.bandGroupObj,callback:function(e){t.bandGroupObj=e},expression:"bandGroupObj"}})],1),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{attrs:{flat:"",label:"OK",color:"primary"},on:{click:t.bandTwitter}})],1)],1)],1)],1)},s=[],i=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("456d"),n("c47a")),o=n.n(i),r=(n("20d6"),n("551c"),n("06db"),n("7514"),n("7f7f"),n("967e")),c=n.n(r),l=(n("96cf"),n("fa84")),u=n.n(l),d=n("f8c8"),p=n("b95e"),h=n("e019"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticClass:"my-card",attrs:{flat:""}},[n("moneyIn",{model:{value:t.showMoneyIn,callback:function(e){t.showMoneyIn=e},expression:"showMoneyIn"}}),n("moneyOut",{attrs:{tokens:t.tokens,currentToken:t.currentToken},model:{value:t.showMoneyOut,callback:function(e){t.showMoneyOut=e},expression:"showMoneyOut"}}),n("q-card-section",{staticClass:"row no-wrap title"},[n("span",{staticClass:"title-name"},[t._v("我的钱包")]),n("q-space"),n("IconHover",{staticClass:"cursor-pointer",attrs:{iconName:"code",width:"30px"},nativeOn:{click:function(e){t.showMoneyIn=!0}}}),n("IconHover",{staticClass:"cursor-pointer",staticStyle:{"margin-left":"60px"},attrs:{iconName:"zhuanzhang",width:"30px"},nativeOn:{click:function(e){t.showMoneyOut=!0}}})],1),n("q-card-section",{staticClass:"text-center"},[n("q-btn",{attrs:{"no-caps":"",flat:"",label:"总金额 ("+t.currentToken.name+")▽"}},[n("q-menu",{attrs:{"auto-close":""}},[n("q-list",{staticStyle:{"min-width":"100px"}},t._l(t.tokens,(function(e){return n("div",{key:e.id},[n("q-item",{attrs:{clickable:""},on:{click:function(n){return t.pickToken(e)}}},[n("q-item-section",[t._v(t._s(e.contract.name))])],1),n("q-separator")],1)})),0)],1)],1),n("div",{staticClass:"value1"},[t._v(t._s(t.currentToken.value))]),n("div",{staticClass:"value2"},[t._v("$ "+t._s(t.priceOf(t.currentToken)))])],1),n("q-card-section",[n("q-list",{staticClass:"money-detail"},t._l(t.log,(function(e){return n("div",{key:e.key},[n("q-item",[n("q-item-section",[n("q-item-label",{staticClass:"detail-big"},[t._v(t._s(e.token_log.note))]),n("q-item-label",{staticClass:"detail-small",attrs:{caption:""}},[t._v(t._s(t.$utils.timeStringToLocal(e.token_log.create_at,"Accurate")))])],1),n("q-item-section",{attrs:{side:""}},[n("q-item-label",{staticClass:"detail-big"},[t._v(t._s(e.token_log.value))]),n("q-item-label",{staticClass:"detail-small",attrs:{caption:""}},[t._v("$ "+t._s(t.priceOf({name:e.contract.name,value:e.token_log.value})))])],1)],1)],1)})),0)],1)],1)},f=[],v=(n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-dialog",{model:{value:t.shouldShow,callback:function(e){t.shouldShow=e},expression:"shouldShow"}},[n("div",{staticClass:"main text-center"},[n("div",{staticClass:"top"},[n("div",{staticClass:"text-h5"},[t._v("扫一扫，向我转账")]),n("div",[t._v("此钱包仅限接受ERC20代币，转入其它代币会造成永久损失")]),n("qrcode-vue",{attrs:{value:t.address,size:t.size,level:"H"}})],1),n("div",{staticClass:"bottom"},[n("div",[t._v("钱包地址")]),n("div",[t._v("\n        "+t._s(t.address)+"\n        "),n("q-btn",{attrs:{flat:"",color:"primary",label:"复制"},on:{click:t.copy}})],1)])])])}),g=[],w=n("d7b0"),b=n("cdde"),_={components:{QrcodeVue:w["a"]},props:{value:Boolean},data:function(){return{size:200}},watch:{},computed:{address:function(){return this.$store.state.user.address},shouldShow:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{copy:function(){var t=this;Object(b["a"])(this.address).then((function(){t.$q.notify("钱包地址已复制到剪切板")})).catch((function(){t.$q.notify("浏览器不支持，请手动复制地址")}))}},created:function(){},mounted:function(){}},k=_,y=(n("0842"),n("2877")),q=n("eebe"),x=n.n(q),C=n("24e8"),O=n("9c40"),$=Object(y["a"])(k,v,g,!1,null,"74e6a556",null),I=$.exports;x()($,"components",{QDialog:C["a"],QBtn:O["a"]});var S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-dialog",{model:{value:t.shouldShow,callback:function(e){t.shouldShow=e},expression:"shouldShow"}},[n("div",{staticClass:"main"},[n("div",{staticClass:"text-h5"},[t._v("钱包转账")]),n("div",[t._v("转出地址")]),n("div",[n("q-input",{staticClass:"myinput",attrs:{outlined:"",dense:"",placeholder:"请输入 +ERC20 钱包地址/DAO ID"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1),n("div",[t._v("\n      转出金额\n      "),n("q-btn",{attrs:{"no-caps":"",flat:"",label:"单位 ("+t.currentToken.contract.name+")▽"}},[n("q-menu",{attrs:{"auto-close":""}},[n("q-list",{staticStyle:{"min-width":"100px"}},t._l(t.tokens,(function(e,a){return n("div",{key:e.id},[n("q-item",{attrs:{clickable:""},on:{click:function(e){return t.pickToken(a)}}},[n("q-item-section",[t._v(t._s(e.contract.symbol))])],1),n("q-separator")],1)})),0)],1)],1)],1),n("div",[n("q-input",{staticClass:"col",attrs:{outlined:"",dense:"",placeholder:"可转出余额"+t.currentToken.token.value},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-btn",{attrs:{flat:"",color:"primary",label:"全部"},on:{click:t.inputAll}})]},proxy:!0}]),model:{value:t.val,callback:function(e){t.val=e},expression:"val"}})],1),n("div",[n("q-btn",{staticClass:"col",attrs:{color:"primary",label:"确定",loading:t.loading,disable:""===this.user||""===this.val},on:{click:t.sentMoney}})],1),n("div",{staticClass:"col"},[t._v("转账手续费（约0.001ETH）将从你的ETH钱包直接扣除。")])])])},Q=[],T={props:{value:Boolean,tokens:Array},data:function(){return{val:"",contract:"",user:"",totalMoney:0,tokenIndex:0,loading:!1}},watch:{},computed:{shouldShow:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},currentToken:function(){return this.tokens[this.tokenIndex]}},methods:{inputAll:function(){this.val=this.currentToken.token.value},sentMoney:function(){var t=this;return u()(c.a.mark((function e(){var n,a,s;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n="protected/user/token/transfer",a={contract:t.currentToken.contract.contract,to_user:t.user,value:t.val},t.val&&!isNaN(Number(t.val))&&0!==Number(t.val)){e.next=5;break}return t.$q.notify("金额不合法"),e.abrupt("return");case 5:if(!(Number(t.val)>Number(t.currentToken.token.value))){e.next=8;break}return t.$q.notify("余额不足"),e.abrupt("return");case 8:if(!(t.user.length>=5||"0x"===t.user.substring(0,2))){e.next=11;break}e.next=13;break;case 11:return t.$q.notify("地址不合法"),e.abrupt("return");case 13:return t.loading=!0,e.next=16,t.$axios.post(n,a);case 16:s=e.sent,t.loading=!1,t.shouldShow=!1,0===s.data.code?t.$q.notify({message:"转账成功"}):100===s.data.code?t.$q.notify("错误"+s.data.message):104===s.data.code&&(t.$q.notify({message:"认证失效，请重新登录"}),t.$showLogin());case 20:case"end":return e.stop()}}),e)})))()},pickToken:function(t){this.tokenIndex=t}},created:function(){},mounted:function(){}},j=T,P=(n("488d"),n("27f9")),L=n("4e73"),G=n("1c1c"),M=n("66e5"),B=n("4074"),D=n("eb85"),A=Object(y["a"])(j,S,Q,!1,null,"cb365f04",null),N=A.exports;x()(A,"components",{QDialog:C["a"],QInput:P["a"],QBtn:O["a"],QMenu:L["a"],QList:G["a"],QItem:M["a"],QItemSection:B["a"],QSeparator:D["a"]});var E={components:{moneyIn:I,moneyOut:N},props:{tokens:Array},data:function(){return{currentToken:{name:"",contract:"",value:"0.00"},showMoneyIn:!1,showMoneyOut:!1,log:[],quotes:[]}},watch:{tokens:function(t){t&&t.length&&this.pickToken(t[0])}},computed:{},methods:{pickToken:function(t){this.currentToken={name:t.contract.name,symbol:t.contract.symbol,contract:t.contract.contract,value:t.token.value},this.tokenLog(t.contract.contract)},tokenLog:function(){var t=u()(c.a.mark((function t(e){var n,a,s;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="protected/user/token/logs",a={contract:e,base_token_log:null},t.next=4,this.$axios.post(n,a);case 4:s=t.sent,0==s.data.code?this.log=s.data.data.token_logs:this.$q.notify(s.data.message);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),priceOf:function(t){var e=t.name,n=t.value;return Math.floor(Number(n)*this.getPrice(e)*1e3)/1e3},getPrice:function(t){if(!this.quotes){var e=[{name:"Ethereum",value:200}];this.quotes=e,this.$q.localStorage.set("quotes",e)}var n=this.quotes.find((function(e){return e.name===t}));return n&&n.value||0}},created:function(){this.tokens&&this.tokens.length&&this.pickToken(this.tokens[0]),this.quotes=this.$q.localStorage.getItem("quotes")},mounted:function(){}},z=E,U=(n("ef4b"),n("f09f")),R=n("a370"),H=n("2c91"),V=n("0170"),F=Object(y["a"])(z,m,f,!1,null,"f0812b54",null),J=F.exports;x()(F,"components",{QCard:U["a"],QCardSection:R["a"],QSpace:H["a"],QBtn:O["a"],QMenu:L["a"],QList:G["a"],QItem:M["a"],QItemSection:B["a"],QSeparator:D["a"],QItemLabel:V["a"]});var W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticClass:"container",attrs:{flat:""}},[n("q-list",{staticClass:"rounded-borders"},[t._l(t.recommendGroups,(function(e){return n("div",{key:e.id},[n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],class:["group-list"],attrs:{clickable:""},on:{click:function(n){return t.jumpToGroup(e.id)}}},[n("q-item-section",{attrs:{avatar:""}},[n("q-avatar",{attrs:{rounded:"",size:"50px"}},[n("img",{attrs:{src:e.avatar||"statics/group.svg"}})])],1),n("q-item-section",[n("q-item-label",{attrs:{lines:"1"}},[n("span",{staticClass:"group-title"},[t._v(t._s(e.name))])]),n("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e.desc_text))])],1),n("q-item-section",{staticClass:"justify-between",attrs:{side:"",top:""}},[2===e.read_permission?n("q-icon",{attrs:{name:"img:statics/icons/icon_suo_2.svg",size:"xs"}}):n("q-item-label",{staticClass:"badge-num"},[t._v(t._s(e.num_post))]),n("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.$utils.timeStringToLocal(e.last_post_at,"RelativeDay")))])],1)],1),n("q-separator",{attrs:{inset:"true"}})],1)})),0===t.recommendGroups.length?n("div",{staticStyle:{padding:"16px 16px 116px"}},[t._v("用户尚未加入任何群组")]):t._e()],2)],1)},K=[],X=n("4db1"),Y=n.n(X),Z={inject:["reload"],components:{},props:{user_id:String},data:function(){return{recommendGroups:[],lastGroupId:null,hasMore:!0}},created:function(){this.init()},watch:{},computed:{},methods:{jumpToGroup:function(t){var e=this;return u()(c.a.mark((function n(){return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.$router.push("/group/"+t).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()},init:function(){var t=this;this.getReCommendGroups().then((function(e){var n;e.length&&(n=t.recommendGroups).push.apply(n,Y()(e))}))},getReCommendGroups:function(){var t=this;return new Promise((function(e,n){var a="/grp/joined",s={user_id:+t.user_id};t.$axios.post(a,s).then((function(t){if(0==t.data.code){var a=t.data.data.grps_joined.map((function(t){return t.grp}));e(a)}else n([])})).catch((function(){n([])}))}))}}},tt=Z,et=(n("29ba"),n("cb32")),nt=n("0016"),at=n("714f"),st=Object(y["a"])(tt,W,K,!1,null,"046a1806",null),it=st.exports;x()(st,"components",{QCard:U["a"],QList:G["a"],QItem:M["a"],QItemSection:B["a"],QAvatar:et["a"],QItemLabel:V["a"],QIcon:nt["a"],QSeparator:D["a"]}),x()(st,"directives",{Ripple:at["a"]});var ot=n("d443");function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var lt={components:{ArticleShow:p["a"],PersonWallet:J,PersonGroupList:it,AddComment:h["a"],Upload:ot["a"]},props:{id:String},data:function(){return{tab:"myPosts",mycode:[],tokens:[{contract:{contract:"",name:"",symbol:""},token:{contract:"",user:0,value:"0.00"}}],pullList:[],userinfo:{},edit:{name:null,avatar:null,social_twitter:null,social_sync_grp:null},bandGroupObj:"",twitterID:"",twitterPushGroupId:"",joinedGroupList:[],addCommentShow:!1,commentPostId:0,targetCommentPost:null,editing:!1,uploadAvatar:!1,recycleInited:!1,recycleList:[],loadingVisible:!1,showBandingTwitter:!1,isClearBanding:!1}},watch:{id:function(){this.init()}},computed:{myUserinfo:function(){return this.$store.state.user},isMyself:function(){return this.myUserinfo.userid==this.id}},methods:{init:function(){var t=this.$store.state.user.userid;t?this.isMyself?(this.userinfo=this.myUserinfo,this.getMyPosts(),this.getmycode(),this.getMyGroups()):(t=this.id,this.getOtherUser(t),this.getOtherPosts(t)):(this.$q.notify({message:"认证失效，请重新登录"}),this.$showLogin())},getMyRecycle:function(){var t=this;return u()(c.a.mark((function e(){var n,a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="protected/post/my/pull",e.next=3,t.$axios.post(n,{base_post:null,deleted:!0});case 3:a=e.sent,0==a.data.code&&(t.recycleList=[],t.recycleList=a.data.data.posts);case 5:case"end":return e.stop()}}),e)})))()},getOtherUser:function(){var t=u()(c.a.mark((function t(e){var n,a;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="/user/"+e,t.next=3,this.$axios.get(n);case 3:a=t.sent,0==a.data.code?this.userinfo=a.data.data.user:a.code;case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getMyGroups:function(){var t=this;return u()(c.a.mark((function e(){var n,a,s;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/protected/grp/joined",e.next=3,Object(d["a"])(n);case 3:a=e.sent,a&&(0==a.code?(s=a.data.grps_joined,t.joinedGroupList=s.map((function(t){return{label:t.grp.name,value:t.grp.id}}))):a.code);case 5:case"end":return e.stop()}}),e)})))()},bandTwitter:function(){this.isClearBanding=!1,this.edit.social_twitter&&this.bandGroupObj.value?(this.twitterID=this.edit.social_twitter,this.twitterPushGroupId=this.bandGroupObj.value,this.showBandingTwitter=!1):""!==this.edit.social_twitter||this.bandGroupObj.value?this.$q.notify("请输入完整"):(this.$q.notify("清除绑定信息"),this.twitterID=null,this.twitterPushGroupId=null,this.showBandingTwitter=!1,this.isClearBanding=!0)},getGroupNameFromId:function(t){if(t&&this.joinedGroupList&&this.joinedGroupList.length){var e=this.joinedGroupList.find((function(e){return e.value===t}));return e?e.label:""}return""},getmycode:function(){var t=u()(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="protected/user/tokens",t.next=3,this.$axios.get(e,{});case 3:n=t.sent,0==n.data.code?this.tokens=n.data.data.tokens:n.data.code;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getLikes:function(t){var e=this;return new Promise((function(n,a){var s=t.map((function(t){return t.post.id}));if(0===s.length)return n(t);e.$axios.post("/protected/post/likes",{posts:s}).then((function(e,a){if(a)n(t);else{var s=e.data.data.likes;t.forEach((function(t){var e=void 0===s[t.post.id]?1:s[t.post.id];t.likeStatus=e})),n(t)}})).catch((function(){a(t)}))}))},getMyPosts:function(){var t=u()(c.a.mark((function t(){var e,n;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="protected/post/my/pull",t.next=3,this.$axios.post(e,{base_post:null,deleted:!1});case 3:if(n=t.sent,0!=n.data.code){t.next=9;break}return this.pullList=[],t.next=8,this.getLikes(n.data.data.posts);case 8:this.pullList=t.sent;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getOtherPosts:function(t){var e=this;return u()(c.a.mark((function n(){var a,s,i;return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.userinfo.userid?"/protected/post/other/pull":"/post/other/pull",s={base_post:null,creator:t-0},n.next=4,e.$axios.post(a,s);case 4:i=n.sent,0==i.data.code&&(e.pullList=[],e.pullList=i.data.data.posts);case 6:case"end":return n.stop()}}),n)})))()},showAddComment:function(t){this.targetCommentPost=this.pullList.find((function(e){return e.post.id===t})),this.addCommentShow=!0},onAddComment:function(){this.targetCommentPost.post.num_comment+=1},postDeleted:function(t){var e=this.pullList.findIndex((function(e){return e.post.id===t}));this.pullList.splice(e,1)},clickEdit:function(){this.editing=!this.editing,this.edit.name=this.userinfo.name,this.edit.avatar=this.userinfo.avatar,this.edit.social_sync_grp=this.userinfo.social_sync_grp,this.edit.social_twitter=this.userinfo.social_twitter},changeAvatar:function(){this.editing&&this.$refs.upload.upload()},uploading:function(){this.loadingVisible=!0},clickBandingTwitterBtn:function(){this.showBandingTwitter=!0,this.isClearBanding=!1},uploaded:function(t){t.err||(this.edit.avatar=t.url),this.loadingVisible=!1,this.$q.notify("头像上传成功")},save:function(){var t=this;return u()(c.a.mark((function e(){var n,a,s,i;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/protected/user/modify",a={name:t.edit.name,avatar:t.edit.avatar,social_twitter:t.twitterID||t.userinfo.social_twitter||null,social_sync_grp:t.twitterPushGroupId||t.userinfo.social_sync_grp||null},t.isClearBanding&&(a.social_twitter=null,a.social_sync_grp=null),e.next=5,t.$axios.put(n,a);case 5:s=e.sent,0===s.data.code?(t.$q.notify("资料修改成功"),i=ct({},t.userinfo),i.name=a.name,i.avatar=a.avatar,i.social_twitter=a.social_twitter,i.social_sync_grp=a.social_sync_grp,t.$store.commit("user/setUserinfo",i)):t.$q.notify("资料修改失败"),t.editing=!1;case 8:case"end":return e.stop()}}),e)})))()}},created:function(){this.init()},mounted:function(){}},ut=lt,dt=(n("ca6e"),n("74f7")),pt=n("cf57"),ht=n("429b"),mt=n("7460"),ft=n("adad"),vt=n("823b"),gt=n("ddd8"),wt=n("4b7e"),bt=Object(y["a"])(ut,a,s,!1,null,"70c10647",null);e["default"]=bt.exports;x()(bt,"components",{QAvatar:et["a"],QIcon:nt["a"],QInput:P["a"],QBtn:O["a"],QInnerLoading:dt["a"],QSpinnerGears:pt["a"],QCard:U["a"],QTabs:ht["a"],QTab:mt["a"],QTabPanels:ft["a"],QTabPanel:vt["a"],QDialog:C["a"],QCardSection:R["a"],QSelect:gt["a"],QCardActions:wt["a"]})}}]);
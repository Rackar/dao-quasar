(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"382f":function(t,e,r){},"6c4f":function(t,e,r){"use strict";var i=r("f915"),s=r.n(i);s.a},"713b":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-layout",{staticClass:"main-layout",attrs:{view:"lHh lpR fFf"}},[r("div",{staticClass:"unfold xs"},[r("q-btn",{attrs:{color:"primary",icon:"展开"},on:{click:function(e){t.leftDrawerOpen=!0}}})],1),r("q-drawer",{staticClass:"drawerContainer",attrs:{"show-if-above":"",bordered:"",breakpoint:600},model:{value:t.leftDrawerOpen,callback:function(e){t.leftDrawerOpen=e},expression:"leftDrawerOpen"}},[r("q-scroll-area",{staticClass:"fit",attrs:{"thumb-style":t.thumbStyle}},[r("headerBarLeft"),r("grouplist")],1)],1),r("q-page-container",[r("router-view")],1)],1)},s=[],n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("q-list",{staticClass:"rounded-borders"},[t._l(t.myGroups,(function(e){return r("div",{key:e.id},[r("div",{staticClass:"left-warpper",on:{mouseover:function(r){t.showListId=e.grp.id},mouseout:t.handleMouseMoveout}},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.showListId==e.grp.id,expression:"showListId == myGroup.grp.id"}],staticClass:"leftHideTool",on:{mouseover:function(r){return t.handleMenuMouseMoveover(e.grp.id)}}},[r("svg",{class:"svg-icon",attrs:{width:"5",height:"22",viewBox:"0 0 5 22",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[r("g",{attrs:{fill:"#2A3542","fill-rule":"nonzero"}},[r("path",{attrs:{d:"M2.5 21.917a2.373 2.373 0 100-4.746 2.373 2.373 0 100 4.746zM2.5 13.373a2.373 2.373 0 100-4.746 2.373 2.373 0 100 4.746zM2.5 4.83a2.373 2.373 0 100-4.747 2.373 2.373 0 100 4.746z"}})])]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.showMenu,expression:"showMenu"}],staticClass:"menu-hover",attrs:{"auto-close":""},on:{mouseout:function(e){t.showMenuId=0}}},[r("q-list",{staticStyle:{"min-width":"100px"}},[r("q-item",{attrs:{clickable:""}},[r("q-item-section",{on:{click:function(r){return r.stopPropagation(),t.setGroupToTop(e)}}},[t._v(t._s(2===e.pinned?"取消置顶":"置顶群"))])],1),r("q-separator"),r("q-item",{attrs:{clickable:""}},[r("q-item-section",{on:{click:function(r){return r.stopPropagation(),t.leaveGroup(e.grp.id)}}},[t._v("退出群")])],1)],1)],1)]),r("router-link",{attrs:{to:{name:"group",params:{id:e.grp.id+""}}}},[r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],class:[{isActive:t.isItemActive(e.grp.id),pin:2===e.pinned},"group-list"],attrs:{clickable:""}},[r("q-item-section",{attrs:{avatar:""}},[r("q-avatar",{attrs:{rounded:"",size:"50px"}},[r("img",{attrs:{src:e.grp.avatar||"statics/group.svg"}})])],1),r("q-item-section",[r("q-item-label",{staticStyle:{"margin-bottom":"5px"},attrs:{lines:"1"}},[r("span",{staticClass:"group-title"},[t._v(t._s(e.grp.name))])]),r("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e.grp.desc_text))])],1),r("q-item-section",{staticClass:"justify-between",attrs:{side:"",top:""}},[r("q-item-label",{staticClass:"badge-num"},[t._v(t._s(e.unread))]),r("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.$utils.timeStringToLocal(e.grp.last_post_at,"RelativeDay")))])],1)],1)],1)],1)])})),r("q-item",{staticStyle:{"margin-top":"20px","padding-left":"48px","padding-right":"48px"}},[r("q-item-section",[r("q-item-label",{attrs:{header:""}},[r("div",{staticClass:"tuijian"},[t._v("推荐")])])],1),r("q-item-section",{attrs:{side:""}},[r("router-link",{attrs:{to:{name:"grouplist"}}},[r("q-btn",{attrs:{dense:"",flat:"",color:"primary",icon:"more_horiz"}})],1)],1)],1),t._l(t.recommendGroups,(function(e){return r("div",{key:e.id},[r("router-link",{attrs:{to:{name:"group",params:{id:e.id+""}}}},[r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],class:[{isActive:t.isItemActive(e.id)},"group-list"],attrs:{clickable:""}},[r("q-item-section",{attrs:{avatar:""}},[r("q-avatar",{attrs:{rounded:"",size:"50px"}},[r("img",{attrs:{src:e.avatar||"statics/group.svg"}})])],1),r("q-item-section",[r("q-item-label",{attrs:{lines:"1"}},[r("span",{staticClass:"group-title"},[t._v(t._s(e.name))])]),r("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e.desc_text))])],1),r("q-item-section",{staticClass:"justify-between",attrs:{side:"",top:""}},[2===e.read_permission?r("q-icon",{attrs:{name:"img:statics/icons/icon_suo_2.svg",size:"xs"}}):r("q-item-label",{staticClass:"badge-num"},[t._v(t._s(e.num_post))]),r("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.$utils.timeStringToLocal(e.last_post_at,"RelativeDay")))])],1)],1)],1)],1)})),r("q-item",{staticClass:"flex-center"},[r("router-link",{attrs:{to:{name:"grouplist"}}},[r("q-btn",{attrs:{outline:"",color:"primary",label:"查看更多群"}})],1)],1)],2),r("quitGroup",{attrs:{groupId:t.quitGroupId},model:{value:t.showQuitGroup,callback:function(e){t.showQuitGroup=e},expression:"showQuitGroup"}})],1)},a=[],o=r("967e"),u=r.n(o),c=(r("96cf"),r("fa84")),p=r.n(c),l=r("f8c8"),d=r("304d"),m=null,f={inject:["reload"],components:{quitGroup:d["a"]},data:function(){return{myGroups:[],recommendGroups:[],showTooltip:!1,showListId:0,showMenuId:0,showQuitGroup:!1,quitGroupId:0}},created:function(){this.init()},props:{id:String},watch:{$route:function(t){"/"===t.fullPath&&this.init()}},computed:{groupid:function(){return this.$route.params.id},showMenu:function(){return 0!==this.showMenuId},userid:function(){return this.$store.state.user.userid},currentGroupId:function(){return this.$store.state.group.currentGroup.id}},methods:{isItemActive:function(t){return+t===+this.$route.params.id},init:function(){var t=this;return p()(u.a.mark((function e(){var r;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getReCommendGroups();case 2:if(!t.userid){e.next=5;break}return e.next=5,t.getMyGroups();case 5:r=0,t.$route.params.id?r=t.$route.params.id:t.myGroups&&t.myGroups.length?r=t.myGroups[0].grp.id:t.recommendGroups&&t.recommendGroups.length&&(r=t.recommendGroups[0].id),setTimeout((function(){t.$route.params.id!=r&&t.$router.push("/group/"+r).catch((function(){}))}),350);case 8:case"end":return e.stop()}}),e)})))()},jumpToGroup:function(t){var e=this;return p()(u.a.mark((function r(){var i,s;return u.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=!1,s=0,e.myGroups.forEach((function(e){e.grp.id==t&&(e.unread=0,i=!0,s=e.pinned)})),e.$q.loading.show(),r.next=6,e.$store.dispatch("group/jumpToGroup",{id:t,joined:i,pinned:s});case 6:e.$q.loading.hide();case 7:case"end":return r.stop()}}),r)})))()},getMyGroups:function(){var t=p()(u.a.mark((function t(){var e,r,i,s;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="/protected/grp/joined",t.next=3,Object(l["a"])(e);case 3:r=t.sent,r&&(0==r.code?(this.myGroups=r.data.grps_joined,i=this.myGroups.map((function(t){return t.grp.id})),s=this.myGroups.map((function(t){return{id:t.grp.id,pinned:t.pinned}})),this.$store.commit("group/setJoinedGroupIdList",{list:i}),this.$store.commit("group/setJoinedGroupPinnedList",s)):r.code);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getReCommendGroups:function(){var t=p()(u.a.mark((function t(){var e,r;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.userid?"/protected/grp/recommend":"/grp/recommend",t.next=3,Object(l["a"])(e);case 3:r=t.sent,0==r.code&&(this.recommendGroups=r.data.grps);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),showListTool:function(){this.$q.notify("点击按钮")},setGroupToTop:function(t){var e=this;return p()(u.a.mark((function r(){var i,s,n,a;return u.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=t.pinned,s={grp:t.grp.id,pinned:1===i?2:1},n="/protected/grp/pin",r.next=5,Object(l["b"])(n,s);case 5:a=r.sent,0===a.code&&(1===i?e.$q.notify("置顶成功"):e.$q.notify("取消置顶成功"),e.reload());case 7:case"end":return r.stop()}}),r)})))()},leaveGroup:function(t){this.showQuitGroup=!0,this.quitGroupId=t},handleMouseMoveout:function(){this.showListId=0},handleMenuMouseMoveover:function(t){var e=this;this.showMenuId=t,clearTimeout(m),m=setTimeout((function(){e.showMenuId=0}),2e3)}}},h=f,v=(r("6c4f"),r("2877")),g=r("eebe"),w=r.n(g),b=r("1c1c"),q=r("0016"),G=r("66e5"),y=r("4074"),_=r("eb85"),x=r("cb32"),k=r("0170"),I=r("58a8"),M=r("9c40"),C=r("714f"),$=Object(v["a"])(h,n,a,!1,null,"416e2a9a",null),Q=$.exports;w()($,"components",{QList:b["a"],QIcon:q["a"],QItem:G["a"],QItemSection:y["a"],QSeparator:_["a"],QAvatar:x["a"],QItemLabel:k["a"],QBadge:I["a"],QBtn:M["a"]}),w()($,"directives",{Ripple:C["a"]});var L=r("de22"),j=[{icon:"people",label:"测弹窗",separator:!0,path:"/toast"}],T={name:"MainLayout",components:{grouplist:Q,headerBarLeft:L["a"]},data:function(){return{leftDrawerOpen:!1,menuList:j,link:"",miniState:!1}},computed:{thumbStyle:function(){return{right:"0px",borderRadius:"3px",backgroundColor:"#00d6c2",width:"3px",opacity:.5}}},methods:{},mounted:function(){},destroyed:function(){}},S=T,O=(r("cfbf"),r("4d5a")),z=r("9404"),A=r("4983"),D=r("09e3"),R=Object(v["a"])(S,i,s,!1,null,"8fdbc8f2",null);e["default"]=R.exports;w()(R,"components",{QLayout:O["a"],QBtn:M["a"],QDrawer:z["a"],QScrollArea:A["a"],QPageContainer:D["a"],QIcon:q["a"]})},cfbf:function(t,e,r){"use strict";var i=r("382f"),s=r.n(i);s.a},f915:function(t,e,r){}}]);